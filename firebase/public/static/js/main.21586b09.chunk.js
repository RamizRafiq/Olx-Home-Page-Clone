(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(1),s=n.n(a),r=n(23),i=n.n(r),u=(n(40),n(41),n(10)),o=n(11),h=n(13),l=n(12),j=(n(42),n(33)),d=n(6),b=(n(43),n(18)),p=n(28);n(47),n(49);p.a.initializeApp({apiKey:"AIzaSyCikpfNbY8llB3XBzXUyo3bKnwbKecqR4A",authDomain:"chatsite-d066f.firebaseapp.com",projectId:"chatsite-d066f",storageBucket:"chatsite-d066f.appspot.com",messagingSenderId:"224167810793",appId:"1:224167810793:web:26a51da9a7522323058278",measurementId:"G-R0V304CWYK"});var f=p.a,O=(n(52),function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(c.jsx)("div",{className:"container-fluid navbar",children:Object(c.jsx)("h1",{children:"Chat App"})})}}]),n}(s.a.Component)),m=(n(53),function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:"container-fluid footer",children:[Object(c.jsx)("h2",{children:"About"}),Object(c.jsx)("p",{children:"Company: My Chat"}),Object(c.jsx)("p",{children:"Address: North Karachi, Karachi Pakistan"}),Object(c.jsx)("p",{children:"Web URL:https://www.chatapp.web.app"}),Object(c.jsx)("p",{children:"Mail Address: ramizrafiq465@gmail.com"}),Object(c.jsx)("h4",{children:" Copyright \xa9 2020 Muhammad Ramiz Muhammad Rafiq"})]})}}]),n}(s.a.Component)),g=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return console.log(this.props),Object(c.jsxs)("div",{children:[Object(c.jsx)(O,{}),Object(c.jsx)("div",{className:"container-fluid login",children:Object(c.jsx)("button",{className:"fb-button",onClick:function(){return e.props.facebook_login(e.props.history)},children:"Facebook Login"})}),Object(c.jsx)(m,{})]})}}]),n}(s.a.Component),x=Object(b.b)((function(e){return{users:e.users}}),(function(e){return{facebook_login:function(t){return e(function(e){return function(t){var n=new f.auth.FacebookAuthProvider;f.auth().signInWithPopup(n).then((function(n){var c=n.user;console.log(c);var a={name:c.displayName,email:c.email,profile:c.photoURL,uid:c.uid};f.database().ref("/").child("users/".concat(c.uid)).set(a).then((function(){t({type:"SET USER",payload:a}),alert("User Login"),e.push("/chat")})).catch((function(e){console.log(e)}))})).catch((function(e){var t=e.message;console.log(t)}))}}(t))}}}))(g),v=(n(54),function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).chat=function(t){e.setState({chat_user:t});var n=e.props.current_user,c=e.uid_merge(n.uid,t.uid);console.log("chat",c),e.get_messages(c)},e.sendMsg=function(){var t=e.props.current_user,n=e.state.chat_user,c=e.uid_merge(t.uid,n.uid);f.database().ref("/").child("chats/".concat(c)).push({message:e.state.message,user:t.name,uid:t.uid}),e.setState({chats:e.state.chats,message:""})},e.get_messages=function(t){f.database().ref("/").child("chats/".concat(t)).on("child_added",(function(t){e.state.chats.push(t.val())})),e.setState({chats:e.state.chats})},e.uid_merge=function(e,t){return e<t?e+t:t+e},e.state={chat_user:{},chats:[],message:""},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.get_users()}},{key:"render",value:function(){var e=this,t=this.props.current_user;return Object(c.jsxs)("div",{className:"container-fluid",children:[Object(c.jsx)("h1",{children:"Chat"}),Object(c.jsx)("img",{src:t.profile,alt:""}),Object(c.jsxs)("h2",{children:["Name: ",t.name]}),Object(c.jsxs)("div",{style:{display:"flex"},children:[Object(c.jsxs)("div",{className:"chat_section",children:[Object(c.jsx)("h3",{children:"Chat Users:"}),Object(c.jsx)("ul",{className:"chat_users",children:this.props.users.map((function(n,a){return n.uid!==t.uid&&Object(c.jsxs)("li",{children:[" ",Object(c.jsx)("img",{src:n.profile,alt:"",width:"30"})," ",Object(c.jsx)("button",{onClick:function(){return e.chat(n)},children:"Chat"}),Object(c.jsx)("h6",{children:n.name})," "]},a)}))})]}),Object(c.jsx)("div",{className:"chat",children:Object.keys(this.state.chat_user).length?Object(c.jsxs)("div",{className:"main",children:[Object(c.jsxs)("h3",{children:[Object(c.jsx)("img",{src:this.state.chat_user.profile,alt:""}),this.state.chat_user.name]}),Object(c.jsx)("ul",{children:this.state.chats.map((function(e,n){return t.name===e.user?Object(c.jsx)("li",{className:"my-message",children:e.message},n):Object(c.jsxs)("li",{className:"user-message",children:[" ",e.message," "]},n)}))}),Object(c.jsxs)("div",{className:"input",children:[Object(c.jsx)("input",{value:this.state.message,onChange:function(t){return e.setState({message:t.target.value})},type:"text",placeholder:"Enter your message"}),Object(c.jsx)("button",{onClick:function(){return e.sendMsg()},children:"Send"})]})]}):Object(c.jsx)("h4",{children:"No User"})})]})]})}}]),n}(s.a.Component)),y=Object(b.b)((function(e){return{current_user:e.current_user,users:e.users}}),(function(e){return{get_users:function(){return e((function(e){var t=[];f.database().ref("/").child("users").on("child_added",(function(n){t.push(n.val()),e({type:"SETFIREBASEUSERS",payload:t})}))}))}}}))(v),_=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(c.jsxs)(j.a,{children:[Object(c.jsx)(d.a,{exact:!0,path:"/",component:x}),Object(c.jsx)(d.a,{exact:!0,path:"/chat",component:y})]})}}]),n}(s.a.Component),C=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(c.jsx)("div",{children:Object(c.jsx)(_,{})})}}]),n}(s.a.Component),k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))},S=n(21),N={users:[],current_user:{}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET USER":return Object(S.a)(Object(S.a)({},e),{},{current_user:t.payload});case"SETFIREBASEUSERS":return Object(S.a)(Object(S.a)({},e),{},{users:t.payload})}return e},R=n(20),w=n(34),A=Object(R.c)(E,Object(R.a)(w.a));i.a.render(Object(c.jsx)(b.a,{store:A,children:Object(c.jsx)(C,{})}),document.getElementById("root")),k()}},[[56,1,2]]]);
//# sourceMappingURL=main.21586b09.chunk.js.map